<div *ngIf="openFilter" class="filter">
  <form class="form" (ngSubmit)="loadAlbums()">
    <div class="form-row">
      
      <div class="form-group col-md-3">
        <label>Vyhledat</label>
        <input type="text" [(ngModel)]="options.search" name="search" class="form-control">
      </div>
      
      <div class="form-group col-md-2">
        <label>Stav</label>
        <select [(ngModel)]="options.filter.status" name="status" class="form-control">
          <option value="draft">v přípravě</option>
          <option value="public">zveřejněná</option>
          <option value="all">vše</option>
        </select>
      </div>

      <div class="form-group col-md-3">
        <label>Datum od</label>
        <input type="date" name="dateFrom" [(ngModel)]="options.filter.dateFrom" class="form-control">
      </div>

      <div class="form-group col-md-3">
        <label>Datum do</label>
        <input type="date" name="dateTill" [(ngModel)]="options.filter.dateTill" class="form-control">
      </div>
      
      <div class="form-group col-md-1">
        <label>&nbsp;</label>
        <button type="submit" class="btn btn-primary text-center" style="width:100%;"><i class="fas fa-search"></i></button>
      </div>
    </div>
  </form>
</div>

<table class="table table-striped table-hover table-sm">
  <thead class="thead-dark">
    <tr>
      <th (click)="setSort('name')">Název alba</th>
      <th (click)="setSort('dateFrom')">Datum</th>
      <th (click)="setSort('status')">Stav</th>
      <th (click)="setSort('datePublished')">Publikováno</th>
      <th class="filter text-right"><a (click)="openFilter=!openFilter" [class.active]="openFilter"><i class="fas fa-filter"></i></a></th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let album of albums" (click)="openAlbum(album)">
      <td>{{album.name}}</td>
      <td class="date">{{album.dateFrom | date:"d. M. y"}} - {{album.dateTill | date:"d. M. y"}}</td>
      <td>{{statuses[album.status] || "N/A"}}</td>
      <td>{{album.datePublished | date:"d. M. y"}}</td>
      <td class="actions text-right">
        <ng-container *ngIf="album.event">
          <a [routerLink]="'/interni/akce/' + album.event" title="Otevřít akci"><i class="far fa-calendar-alt"></i></a>
          &nbsp;
        </ng-container>
        <a [routerLink]="'/interni/galerie/' + album._id + '/upravit'"><i class="fas fa-pencil-alt"></i></a>
        &nbsp;
        <a [routerLink]="'/fotogalerie/' + album._id"><i class="fas fa-external-link-alt"></i></a>
      </td>
    </tr>
  </tbody>
</table>

<p *ngIf="loading">Načítám...</p>

<nav *ngIf="pages > 1">
  <ul class="pagination justify-content-center">
    <li class="page-item" [class.disabled]="page <= 1"><a class="page-link" [routerLink]="getPageLink(i-1)">&laquo;</a></li>
    <li *ngFor="let i of getPages()" class="page-item"><a class="page-link" [routerLink]="getPageLink(i)">{{i}}</a></li>
    <li class="page-item" [class.disabled]="page >= pages"><a class="page-link" [routerLink]="getPageLink(i+1)">&raquo;</a></li>
  </ul>
</nav>