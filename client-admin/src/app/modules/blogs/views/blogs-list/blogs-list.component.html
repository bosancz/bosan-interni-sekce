<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>Blog</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="showFilter = !showFilter">
        <ion-icon name="search-outline"></ion-icon>
      </ion-button>
      <ion-button fill="clear" color="primary" routerLink="vytvorit">
        <ion-icon name="add-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="actions" *actionMenu></div>

  <div *ngIf="showFilter" class="filter">
    <ion-searchbar
      [ngModel]="searchString | async"
      (ngModelChange)="searchString.next($event)"
      (keydown.enter)="$event.preventDefault()"
    ></ion-searchbar>
  </div>

  <admin-table>
    <thead>
      <tr>
        <th>Titulek</th>
        <th>Datum publikace</th>
        <th>Stav</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let blog of filteredBlogs" [routerLink]="blog._id">
        <td>{{ blog.title }}</td>
        <td>{{ blog.datePublished | date: "d. M. y" || "N/A" }}</td>
        <td>{{ statusesIndex[blog.status] || blog.status }}</td>
      </tr>
    </tbody>
  </admin-table>

  <p *ngIf="loading">Načítám...</p>
</ion-content>
