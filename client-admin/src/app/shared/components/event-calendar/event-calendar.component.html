<div class="calendar">
  <div class="calendar-row" *ngFor="let row of calendar">
    <div class="days clearfix">
      <div
        *ngFor="let day of row.days; let i = index"
        class="day"
        [style.left]="i * (1 / row.days.length) * 100 + '%'"
        [style.width]="(1 / row.days.length) * 100 + '%'"
        [class.weekend]="day.properties.weekend"
        [class.holiday]="day.properties.holiday"
        [class.selected]="isSelected(day)"
        [class.odd-month]="day.properties.oddMonth"
        (mousedown)="setEventStart(day)"
        (mouseover)="setEventEnd(day)"
        (mouseup)="emitSelected()"
      >
        <div class="date" [class.empty]="day.properties.empty">{{ day.date.day }}. {{ day.date.month }}.</div>
      </div>
    </div>

    <div class="events own" [style.height]="(row.blocks.own.levels + 1) * eventHeight + 'px'">
      <div
        *ngFor="let calEvent of row.blocks.own.events"
        [class]="'event ' + getEventClass(calEvent.event)"
        [style.left]="getEventLeft(calEvent, row) * 100 + '%'"
        [style.width]="getEventWidth(calEvent, row) * 100 + '%'"
        [style.top]="eventHeight * (calEvent.level - 1) + 'px'"
        [matTooltip]="getEventTooltip(calEvent.event)"
        placement="bottom"
        [routerLink]="['/akce', calEvent.event._id]"
      >
        {{ calEvent.event.name }}
      </div>
    </div>

    <div class="events cpv" [style.height]="row.blocks.cpv.levels * eventHeight + 'px'">
      <a
        *ngFor="let calEvent of row.blocks.cpv.events"
        class="event d-block"
        [style.left]="getEventLeft(calEvent, row) * 100 + '%'"
        [style.width]="getEventWidth(calEvent, row) * 100 + '%'"
        [style.top]="eventHeight * (calEvent.level - 1) + 'px'"
        [matTooltip]="calEvent.event.name"
        [attr.href]="calEvent.event.link || null"
        target="_blank"
        placement="bottom"
      >
        {{ calEvent.event.name }}
      </a>
    </div>
  </div>
</div>
